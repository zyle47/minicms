{% extends "micmnis/base.html" %}
{% block title %}{{ form.instance.pk|yesno:"Edit Item,Add Item" }}{% endblock %}
{% block content %}

<h2 class="mb-4">{{ form.instance.pk|yesno:"‚úèÔ∏è Edit Item,‚ûï Add New Item" }}</h2>

<div class="alert alert-info mb-4">
    üí° <strong>Tip:</strong> Fields marked with * are required. Use commas for list fields like ‚Äúuses‚Äù or ‚Äúingredients‚Äù.
</div>

<form method="POST" class="mt-3">
    {% csrf_token %}
    
    <!-- General Info -->
    <div class="card mb-4 shadow-sm">
        <div class="card-header bg-light fw-bold">üßæ General Information</div>
        <div class="card-body row g-3">
            <div class="col-md-6 col-lg-4">
                {{ form.item_id.label_tag }} {{ form.item_id }}
            </div>
            <div class="col-md-6 col-lg-8">
                {{ form.name.label_tag }} {{ form.name }}
            </div>
            <div class="col-md-6 col-lg-4">
                {{ form.type.label_tag }} {{ form.type }}
            </div>
            <div class="col-md-6 col-lg-4">
                {{ form.form.label_tag }} {{ form.form }}
            </div>
            <div class="col-md-6 col-lg-4">
                {{ form.origin.label_tag }} {{ form.origin }}
            </div>
        </div>
    </div>

    <!-- Pricing / Quantity -->
    <div class="card mb-4 shadow-sm">
        <div class="card-header bg-light fw-bold">üí∞ Pricing & Quantity</div>
        <div class="card-body row g-3">
            <div class="col-md-6 col-lg-3">
                {{ form.price_usd.label_tag }} {{ form.price_usd }}
            </div>
            <div class="col-md-6 col-lg-3">
                {{ form.stock_oz.label_tag }} {{ form.stock_oz }}
            </div>
            <div class="col-md-6 col-lg-3">
                {{ form.volume_ml.label_tag }} {{ form.volume_ml }}
            </div>
            <div class="col-md-6 col-lg-3">
                {{ form.container_size_g.label_tag }} {{ form.container_size_g }}
            </div>
        </div>
    </div>

    <!-- Preparation / Application -->
    <div class="card mb-4 shadow-sm">
        <div class="card-header bg-light fw-bold">üß™ Preparation & Use</div>
        <div class="card-body row g-3">
            <div class="col-md-6 col-lg-4">
                {{ form.preparation.label_tag }} {{ form.preparation }}
            </div>
            <div class="col-md-6 col-lg-4">
                {{ form.dosage.label_tag }} {{ form.dosage }}
            </div>
            <div class="col-md-6 col-lg-4">
                {{ form.application.label_tag }} {{ form.application }}
            </div>
        </div>
    </div>

    <!-- Related Data -->
    <div class="card mb-4 shadow-sm">
        <div class="card-header bg-light fw-bold">üåø Related Data</div>
        <div class="card-body">
            <!-- Uses -->
            <div class="mb-4">
                <h5 class="mb-3">Uses</h5>
                <div class="form-check form-check-inline">
                    {% for checkbox in form.uses %}
                    <div class="form-check form-check-inline">
                        {{ checkbox.tag }} <!-- hidden checkbox input -->
                        <label class="btn btn-outline-success" for="{{ checkbox.id_for_label }}">
                            {{ checkbox.choice_label }}
                        </label>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Ingredients -->
            <div class="mb-4">
                <h5 class="mb-3">Ingredients</h5>
                <div class="form-check form-check-inline">
                    {% for checkbox in form.ingredients %}
                    <div class="form-check form-check-inline">
                        {{ checkbox.tag }}
                        <label class="btn btn-outline-info" for="{{ checkbox.id_for_label }}">
                            {{ checkbox.choice_label }}
                        </label>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Safety Notes -->
            <div class="mb-4">
                <h5 class="mb-3">Safety Notes</h5>
                <div class="form-check form-check-inline">
                    {% for checkbox in form.safety_notes %}
                    <div class="form-check form-check-inline">
                        {{ checkbox.tag }}
                        <label class="btn btn-outline-danger" for="{{ checkbox.id_for_label }}">
                            {{ checkbox.choice_label }}
                        </label>
                    </div>
                    {% endfor %}
                </div>
            </div>

        </div>
    </div>

    <div class="d-flex justify-content-between mt-4">
        <button type="submit" class="btn btn-success">üíæ Save</button>
        <a href="{% url 'inventory_list' %}" class="btn btn-secondary">Cancel</a>
    </div>
</form>

{% endblock %}
